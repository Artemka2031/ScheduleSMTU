from aiogram import Router
from aiogram.filters import CommandStart
from aiogram.fsm.context import FSMContext
from aiogram.types import Message
from aiogram.utils.markdown import hbold

from Bot.Routers.UserRouters.StartRouter.registration import RegistrationState

StartRouter = Router()


@StartRouter.message(CommandStart())
async def start_messaging(message: Message, state: FSMContext) -> None:
    await state.clear()
    await message.answer(
        "–ü—Ä–∏–≤–µ—Ç, –¥—Ä—É–∂–∏—â–µ! üëã\n\n"
        "–ú—ã —Ä–∞–¥—ã –≤–∏–¥–µ—Ç—å —Ç–µ–±—è –∑–¥–µ—Å—å! üòä –≠—Ç–æ—Ç –±–æ—Ç —Å–æ–∑–¥–∞–Ω, —á—Ç–æ–±—ã —Ç–µ–±–µ –±—ã–ª–æ –ø—Ä–æ—â–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ —É—á–µ–±–Ω–æ–π –∂–∏–∑–Ω–∏ –Ω–∞—à–µ–≥–æ —É–Ω–∏–≤–µ—Ä–∞.\n\n"
        "üëâ –°–º–æ—Ç—Ä–∏ —Å–≤–æ—ë —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Ç–µ–∫—É—â—É—é –Ω–µ–¥–µ–ª—é, –ø–ª–∞–Ω–∏—Ä—É–π —Å–≤–æ—ë –≤—Ä–µ–º—è –Ω–∞ –±—É–¥—É—â–µ–µ ‚Äî –≤—ã–±–∏—Ä–∞–π –ª—é–±—É—é –Ω–µ–¥–µ–ª—é –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–µ–Ω—å üìÖ —á–µ—Ä–µ–∑ –≤–∏–¥–∂–µ—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—è!\n\n"
        "üë©‚Äçüè´üë®‚Äçüè´ –•–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–≤–æ–∏—Ö –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π? –ù–∞–∂–º–∏ '–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ' -> '–¢–≤–æ–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏'. –ò–ª–∏ –≤–≤–µ–¥–∏ –∏–º—è –Ω—É–∂–Ω–æ–≥–æ –ø—Ä–µ–ø–æ–¥–∞, –∏ –º—ã –Ω–∞–π–¥—ë–º –µ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ! üîç\n\n"
        "üîÑ –•–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥—Ä—É–∑–µ–π? –ò—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–∞–Ω–¥—É /change_group, —á—Ç–æ–±—ã –≤—Å–µ–≥–¥–∞ –±—ã—Ç—å –≤ –∫—É—Ä—Å–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∑–∞–Ω—è—Ç–∏–π.\n\n"
        "üí¨ –ï—Å—Ç—å –∏–¥–µ–∏ –∏–ª–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è? –ù–∞–ø–∏—à–∏ –Ω–∞–º —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É /suggestion ‚Äî –º—ã –≤—Å–µ–≥–¥–∞ —Ä–∞–¥—ã —Ç–≤–æ–∏–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º!\n\n"
        "üîî –•–æ—á–µ—à—å –±—ã—Ç—å –≤ –∫—É—Ä—Å–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å? –í–∫–ª—é—á–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏ –∫–æ–º–∞–Ω–¥–æ–π /notification.\n\n"
        "–ú—ã —Å–∞–º–∏ —Å—Ç—É–¥–µ–Ω—Ç—ã –∏ –∑–Ω–∞–µ–º, –∫–∞–∫ –≤–∞–∂–Ω–æ –¥–µ—Ä–∂–∞—Ç—å –≤—Å—ë –ø–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º, —á—Ç–æ–±—ã –≤—Å—ë –±—ã–ª–æ —á—ë—Ç–∫–æ –∏ –∫—Ä—É—Ç–æ! –¢–∞–∫ —á—Ç–æ –ø–æ–ª—å–∑—É–π—Å—è –±–æ—Ç–æ–º, –ø–ª–∞–Ω–∏—Ä—É–π —Å–≤–æ—ë –≤—Ä–µ–º—è –∏ –±—É–¥—å –Ω–∞ –≤–æ–ª–Ω–µ! üöÄ"
    )

    sent_message = await message.answer(f"{hbold('–ù–∞–ø–∏—à–∏ –Ω–æ–º–µ—Ä —Å–æ–≤–µ–π –≥—Ä—É–ø–ø—ã –∏ —è —Å–º–æ–≥—É –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–µ–±–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ:')}")

    await state.set_state(RegistrationState.user_id)
    await state.update_data(user_id=message.from_user.id, messages_to_delete=[sent_message.message_id])
    await state.set_state(RegistrationState.group_number)
